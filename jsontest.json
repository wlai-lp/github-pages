{
	"info": {
		"_postman_id": "d9e23d17-65a3-48f0-81f8-e90e7fd84700",
		"name": "UMS REST API V1",
		"description": "Welcome to the API Documentation of UMS REST API. This API provides a broad set of endpoints to access and manage Conversation lifecycle resources.\n\nThe official documentation for the API can be found at the following location:\n\n[Messaging REST API Documentation](https://l1905.gitlab.io/conversational-cloud-engineering/conversation-exchange-services/unified-messaging-system/openapidocs)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "27061155",
		"_collection_link": "https://cxs-lp.postman.co/workspace/UMS-Team-Postman-Collection~9e0b5742-398d-40b2-8dcd-74f14ee829fa/collection/20375066-d9e23d17-65a3-48f0-81f8-e90e7fd84700?action=share&source=collection_link&creator=27061155"
	},
	"item": [
		{
			"name": "General",
			"item": [
				{
					"name": "Get Base URIs",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"postman.setEnvironmentVariable(\"sentinelDomain\", JSON.parse(responseBody).baseURIs.find(ele => { return ele.service === 'sentinel' }).baseURI);",
									"postman.setEnvironmentVariable(\"idpDomain\", JSON.parse(responseBody).baseURIs.find(ele => { return ele.service === 'idp' }).baseURI);",
									"postman.setEnvironmentVariable(\"umsDomain\", JSON.parse(responseBody).baseURIs.find(ele => { return ele.service === 'asyncMessagingEnt' }).baseURI);",
									"postman.setEnvironmentVariable(\"agentVepDomain\", JSON.parse(responseBody).baseURIs.find(ele => { return ele.service === 'agentVep' }).baseURI);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://{{csdsDomain}}/api/account/{{account}}/service/baseURI.json?version=1.0",
							"protocol": "http",
							"host": [
								"{{csdsDomain}}"
							],
							"path": [
								"api",
								"account",
								"{{account}}",
								"service",
								"baseURI.json"
							],
							"query": [
								{
									"key": "version",
									"value": "1.0"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Consumer - AppJWT+ConsumerJWS",
			"item": [
				{
					"name": "Auth",
					"item": [
						{
							"name": "Acquire AppJWT",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"AppJWT\", JSON.parse(responseBody).access_token);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.globals.unset(\"AppJWT\");"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"url": {
									"raw": "https://{{sentinelDomain}}/sentinel/api/account/{{account}}/app/token?v=1.0&grant_type=client_credentials&client_id={{clientId}}&client_secret={{clientSecret}}",
									"protocol": "https",
									"host": [
										"{{sentinelDomain}}"
									],
									"path": [
										"sentinel",
										"api",
										"account",
										"{{account}}",
										"app",
										"token"
									],
									"query": [
										{
											"key": "v",
											"value": "1.0"
										},
										{
											"key": "grant_type",
											"value": "client_credentials"
										},
										{
											"key": "client_id",
											"value": "{{clientId}}"
										},
										{
											"key": "client_secret",
											"value": "{{clientSecret}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Acquire ConsumerJWS",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"ConsumerJWS\", JSON.parse(responseBody).token);",
											"postman.setEnvironmentVariable(\"conversationId\", \"\");",
											"",
											"var consumerJWS = pm.environment.get(\"ConsumerJWS\");",
											"",
											"function jwt_decode(a) {",
											"    var parts = a.split('.'); // header, payload, signature",
											"    return JSON.parse(atob(parts[1]));",
											"}",
											"",
											"var decodedJws = jwt_decode(consumerJWS);",
											"postman.setEnvironmentVariable(\"consumer_id\", decodedJws.lp_consumer_id);",
											"console.log(pm.environment.get(\"consumer_id\"));"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "{{AppJWT}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n\t\"ext_consumer_id\":\"consumer_4\"\n}"
								},
								"url": {
									"raw": "https://{{idpDomain}}/api/account/{{account}}/consumer?v=1.0",
									"protocol": "https",
									"host": [
										"{{idpDomain}}"
									],
									"path": [
										"api",
										"account",
										"{{account}}",
										"consumer"
									],
									"query": [
										{
											"key": "v",
											"value": "1.0"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "User Profiles",
					"item": [
						{
							"name": "Put Create Consumer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.environment.unset(\"ConsumerEtag\");",
											"",
											"const firstName = pm.variables.replaceIn(\"{{$randomFirstName}}\");",
											"const lastName = pm.variables.replaceIn(\"{{$randomLastName}}\");",
											"pm.variables.set(\"firstName\", firstName);",
											"pm.variables.set(\"lastName\", lastName);",
											"pm.variables.set(\"email\", firstName + \".\" + lastName + \"@liveperson.com\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true,
									"connection": true,
									"accept-encoding": true,
									"accept": true
								}
							},
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Request-Id",
										"value": "\"123\"{{$randomInt}}",
										"type": "text"
									},
									{
										"key": "LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstName\": \"{{firstName}}\",\n  \"lastName\":\"{{lastName}}\",\n  \"brandId\":\"{{account}}\",\n  \"mobileNumber\": \"{{$randomPhoneNumber}}\",\n  \"email\": \"{{email}}\",\n  \"claims\": {\n    \"{{account}}\": {\n      \"lp_sdes_json\": [\n        {\n          \"type\": \"ctmrinfo\",\n          \"info\": {\n            \"companyBranch\": \"049502354688\",\n            \"customerId\": \"{{consumer_id}}\"\n          }\n        },\n        {\n          \"type\": \"personal\",\n          \"personal\": {\n             \"firstname\": \"{{firstName}}\"\n          }\n        }\n      ]\n    }\n  },\n  \"acr\": null\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Put Update Consumer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const firstName = pm.variables.replaceIn(\"{{$randomFirstName}}\");",
											"const lastName = pm.variables.replaceIn(\"{{$randomLastName}}\");",
											"pm.variables.set(\"firstName\", firstName);",
											"pm.variables.set(\"lastName\", lastName);",
											"pm.variables.set(\"email\", firstName + \".\" + lastName + \"@liveperson.com\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true,
									"connection": true,
									"accept-encoding": true,
									"accept": true
								}
							},
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Request-Id",
										"value": "\"123\"{{$randomInt}}",
										"type": "text"
									},
									{
										"key": "LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConsumerEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstName\": \"{{firstName}}\",\n  \"lastName\":\"{{lastName}}\",\n  \"brandId\":\"{{account}}\",\n  \"mobileNumber\": \"{{$randomPhoneNumber}}\",\n  \"email\": \"{{email}}\",\n  \"claims\": {\n    \"{{account}}\": {\n      \"lp_sdes_json\": [\n        {\n          \"type\": \"ctmrinfo\",\n          \"info\": {\n            \"companyBranch\": \"049502354688\",\n            \"customerId\": \"{{consumer_id}}\"\n          }\n        },\n        {\n          \"type\": \"personal\",\n          \"personal\": {\n             \"firstname\": \"{{firstName}}\"\n          }\n        }\n      ]\n    }\n  },\n  \"acr\": null\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Consumer By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Conversations",
					"item": [
						{
							"name": "Create Conversation - CustomContext",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"CustomContext\",\n      \"clientProperties\": {\n        \"appId\": \"whatsapp\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      },\n      \"name\": \"WhatsApp Business\"\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Conversation - FacebookContext",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"FacebookContext\",\n      \"lang\": \"ENG\",\n      \"message\": \"A message\",\n      \"qty\": 10,\n      \"itemDescription\": \"Item description\",\n      \"clientProperties\": {\n        \"appId\": \"facebook\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"deviceFamily\": \"DESKTOP\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Conversation - SharkContext",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"SharkContext\",\n      \"interactionContextId\": \"ID-123456\",\n      \"clientProperties\": {\n        \"appId\": \"shark\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"deviceFamily\": \"DESKTOP\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Conversation - MobileAppContext",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"MobileAppContext\",\n      \"clientProperties\": {\n        \"appId\": \"Mobile\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"deviceFamily\": \"MOBILE\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Conversation - VoiceContext",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"VoiceContext\",\n      \"voiceConversationId\": \"{{$guid}}\",\n      \"phoneNumber\": \"{{$randomPhoneNumber}}\",\n      \"sentimentScore\": \"1.4\",\n      \"clientProperties\": {\n        \"appId\": \"Voice\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"deviceFamily\": \"MOBILE\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversation By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"});",
											"",
											"postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id,stage,dialogs,context",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Stage",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"stage\": \"CLOSE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - CSATRate",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"csat\": {\n        \"rate\": \"4\",\n        \"resolutionConfirmation\": \"true\",\n        \"status\": \"FILLED\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By ConsumerId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,stage,dialogs,context",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversation Count By ConsumerId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "HEAD",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Dialog - Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"dialog_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id,conversationId,participants",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{DialogEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Dialog - Last Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id,conversationId,participants",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Last Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{DialogEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Messages",
					"item": [
						{
							"name": "Publish Message - Plain Text",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I need some help today message {{$timestamp}}!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Plain Text to Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I need some help today message {{$timestamp}}!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Rich Content",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"RICH_CONTENT\",\n  \"content\": {\n     \"structuredContent\": {\n        \"type\": \"vertical\",\n        \"elements\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"product name (Title)\",\n            \"tooltip\": \"text tooltip\"\n          }\n        ]\n      },\n      \"alt\": \"alt text to go with message.\",\n      \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Acknowledgement",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"ACKNOWLEDGEMENT\",\n  \"content\": {\n    \"status\": \"READ\",\n    \"sequenceList\":[0]\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Chat State",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {",
											"    pm.response.to.have.status(204);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"CHAT_STATE\",\n  \"content\": {\n    \"chatState\": \"COMPOSING\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages?filters={}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}"
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,dialogId,sequence,content.text",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Message Count",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "HEAD",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages?olderThanSequence=10",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									],
									"query": [
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Unread Messages Count",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "HEAD",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{consumer_id}}/unread-messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{consumer_id}}",
										"unread-messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages From New Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,dialogId,sequence,content.text",
											"disabled": true
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Subscriptions",
					"item": [
						{
							"name": "Create Subscription for Conversation updates (ExConvSubscription)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"ExConvSubscription\",\n  \"filters\": {\n    \"consumerId\": \"{{consumer_id}}\",\n    \"brandId\": \"{{account}}\",\n    \"conversationStages\": [\n      \"OPEN\", \"CLOSE\"\n    ],\n    \"conversationStates\": [\n      \"OPEN\", \"CLOSE\"\n    ],\n    \"dialogTypes\": [\n        \"MAIN\",\n        \"POST_SURVEY\"\n    ]\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/subscriptions",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Subscription for Messages (MSSubscription)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "Request-ID",
										"value": "{{$timestamp}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"MsSubscription\",\n  \"filters\" : {\n    \"dialogId\": \"{{conv_id}}\",\n    \"fromSeq\": 0\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/subscriptions",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Single Subscription By Id",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id,type,brandId",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Subscription",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{account}}.111",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{SubscriptionEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "File Upload/Download",
					"item": [
						{
							"name": "Generate File Upload Path",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"relativePath\", JSON.parse(responseBody).relativePath);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{consumer_id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n   \"fileSize\":5020,\n   \"fileType\":\"MP3\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/brands/{{account}}/file-upload-path",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"brands",
										"{{account}}",
										"file-upload-path"
									]
								}
							},
							"response": []
						},
						{
							"name": "Generate File Download Path",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text"
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{consumer_id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"relativePath\": \"{{relativePath}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/brands/{{account}}/file-download-path",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"brands",
										"{{account}}",
										"file-download-path"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Consumer - ConsumerJWT",
			"item": [
				{
					"name": "Auth",
					"item": [
						{
							"name": "Acquire ConsumerJWT - Unauthenticated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"ConsumerJWT\", pm.response.json().jwt);",
											"var consumerJWT = pm.environment.get(\"ConsumerJWT\");",
											"",
											"function jwt_decode(a) {",
											"    var parts = a.split('.'); // header, payload, signature",
											"    return JSON.parse(atob(parts[1]));",
											"}",
											"",
											"var decodedJwt = jwt_decode(consumerJWT);",
											"postman.setEnvironmentVariable(\"consumer_id\", decodedJwt.sub);",
											"console.log(\"ConsumerId: \" + decodedJwt.sub)"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{idpDomain}}/api/account/{{account}}/signup",
									"protocol": "https",
									"host": [
										"{{idpDomain}}"
									],
									"path": [
										"api",
										"account",
										"{{account}}",
										"signup"
									]
								}
							},
							"response": []
						},
						{
							"name": "Acquire ConsumerJWT - Authenticated",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"ConsumerJWT\", pm.response.json().token);",
											"var consumerJWT = pm.environment.get(\"ConsumerJWT\");",
											"",
											"function jwt_decode(a) {",
											"    var parts = a.split('.'); // header, payload, signature",
											"    return JSON.parse(atob(parts[1]));",
											"}",
											"",
											"var decodedJwt = jwt_decode(consumerJWT);",
											"postman.setEnvironmentVariable(\"consumer_id\", decodedJwt.sub);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\"code\": \"{{consumerCode}}\", \"redirect_uri\": \"{{consumerRedirect}}\"}"
								},
								"url": {
									"raw": "https://{{idpDomain}}/api/account/{{account}}/app/default/authenticate",
									"protocol": "https",
									"host": [
										"{{idpDomain}}"
									],
									"path": [
										"api",
										"account",
										"{{account}}",
										"app",
										"default",
										"authenticate"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "User Profiles",
					"item": [
						{
							"name": "Put Create Consumer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const firstName = pm.variables.replaceIn(\"{{$randomFirstName}}\");",
											"const lastName = pm.variables.replaceIn(\"{{$randomLastName}}\");",
											"pm.variables.set(\"firstName\", firstName);",
											"pm.variables.set(\"lastName\", lastName);",
											"pm.variables.set(\"email\", firstName + \".\" + lastName + \"@liveperson.com\");",
											"",
											"const jar = pm.cookies.jar();",
											"",
											"jar.clear(pm.request.url, function (error) {",
											"  // error - <Error>",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true,
									"connection": true,
									"accept-encoding": true,
									"accept": true
								},
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Request-Id",
										"value": "\"123\"{{$randomInt}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConsumerEtag}}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstName\": \"{{firstName}}\",\n  \"lastName\":\"{{lastName}}\",\n  \"brandId\":\"{{account}}\",\n  \"mobileNumber\": \"{{$randomPhoneNumber}}\",\n  \"email\": \"{{email}}\",\n  \"pnData\" : {\n    \"certName\": \"com.tmo.lpapp\",\n    \"serviceName\": \"\",\n    \"token\": \"c9e790392be1d393050b3a61ee453db5cffda90c52a24930c29e50d4fac16c80d6eb0363946a93d1363063dbf73d71e3f6f330e3d74893a7cc6ee44c30cf832fe400b073efc8399b9f4b7c15241d90cd.53449da4008882f12264aad806dc1b6f.d610c350869c091ec97e5115215e0f221f705b560df3d69ff33ea58beb0f7dc5\"\n  },\n  \"claims\": {\n    \"{{account}}\": {\n      \"lp_sdes_json\": [\n        {\n          \"type\": \"ctmrinfo\",\n          \"info\": {\n            \"companyBranch\": \"049502354688\",\n            \"customerId\": \"7e5826d7aa743f2c85e9b53f598cfe92337c9baa3\"\n          }\n        },\n        {\n          \"type\": \"personal\",\n          \"personal\": {\n             \"firstname\": \"{{firstName}}\"\n          }\n        }\n      ]\n    }\n  },\n  \"acr\": null\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Put Create Consumer Without Claims",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const firstName = pm.variables.replaceIn(\"{{$randomFirstName}}\");",
											"const lastName = pm.variables.replaceIn(\"{{$randomLastName}}\");",
											"pm.variables.set(\"firstName\", firstName);",
											"pm.variables.set(\"lastName\", lastName);",
											"pm.variables.set(\"email\", firstName + \".\" + lastName + \"@liveperson.com\");",
											"",
											"const jar = pm.cookies.jar();",
											"",
											"jar.clear(pm.request.url, function (error) {",
											"  // error - <Error>",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true,
									"connection": true,
									"accept-encoding": true,
									"accept": true
								},
								"disableCookies": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Request-Id",
										"value": "123{{$randomInt}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConsumerEtag}}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstName\": \"{{firstName}}\",\n  \"lastName\":\"{{lastName}}\",\n  \"brandId\":\"{{account}}\",\n  \"mobileNumber\": \"{{$randomPhoneNumber}}\",\n  \"email\": \"{{email}}\",\n  \"pnData\" : {\n    \"certName\": \"com.tmo.lpapp\",\n    \"serviceName\": \"\",\n    \"token\": \"\"\n  },\n  \"acr\": null\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Put Update Consumer",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const firstName = pm.variables.replaceIn(\"{{$randomFirstName}}\");",
											"const lastName = pm.variables.replaceIn(\"{{$randomLastName}}\");",
											"pm.variables.set(\"firstName\", firstName);",
											"pm.variables.set(\"lastName\", lastName);",
											"pm.variables.set(\"email\", firstName + \".\" + lastName + \"@liveperson.com\");"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true,
									"connection": true,
									"accept-encoding": true,
									"accept": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Request-Id",
										"value": "\"123\"{{$randomInt}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConsumerEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstName\": \"{{firstName}}\",\n  \"lastName\":\"{{lastName}}\",\n  \"brandId\":\"{{account}}\",\n  \"mobileNumber\": \"{{$randomPhoneNumber}}\",\n  \"email\": \"{{email}}\",\n  \"brandData\": {\n    \"{{account}}\": {\n        \"jwtHash\": -700344847\n    }\n  },\n  \"pnData\" : {\n    \"certName\": \"com.tmo.lpapp\",\n    \"serviceName\": \"\",\n    \"token\": \"\"\n  },\n  \"authMap\": {\n  },\n  \"acr\": null\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Consumer By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Conversations",
					"item": [
						{
							"name": "Consumer Create Conversation - CustomContext Using ConsumerJWT",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"CustomContext\",\n      \"clientProperties\": {\n        \"appId\": \"whatsapp\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      },\n      \"name\": \"WhatsApp Business\"\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Consumer Create Conversation - FacebookContext Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"FacebookContext\",\n      \"lang\": \"ENG\",\n      \"message\": \"A message\",\n      \"qty\": 10,\n      \"itemDescription\": \"Item description\",\n      \"clientProperties\": {\n        \"appId\": \"facebook\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"deviceFamily\": \"DESKTOP\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Consumer Create Conversation - SharkContext Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"SharkContext\",\n      \"interactionContextId\": \"ID-123456\",\n      \"clientProperties\": {\n        \"appId\": \"shark\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"deviceFamily\": \"DESKTOP\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      }\n    },\n    \"campaignInfo\": {\n      \"engagementId\": 99999,\n      \"campaignId\": 99999\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Consumer Create Conversation - MobileAppContext Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"MobileAppContext\",\n      \"clientProperties\": {\n        \"appId\": \"Mobile\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"deviceFamily\": \"MOBILE\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Consumer Create Conversation - VoiceContext Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    const jsonData = pm.response.json();",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"conv_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "LP-Metadata",
										"value": "[{\"type\":\"ActionReason\",\"reason\":\"some reason\",\"reasonId\":\"some reason Id\"}]",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"brandId\": \"{{account}}\",\n    \"skillId\": \"4119939010\",\n    \"context\": {\n      \"type\": \"VoiceContext\",\n      \"voiceConversationId\": \"{{$guid}}\",\n      \"phoneNumber\": \"{{$randomPhoneNumber}}\",\n      \"sentimentScore\": \"1.4\",\n      \"clientProperties\": {\n        \"appId\": \"Voice\",\n        \"ipAddress\": \"{{$randomIP}}\",\n        \"deviceFamily\": \"MOBILE\",\n        \"features\": [\n          \"PHOTO_SHARING\",\n          \"QUICK_REPLIES\",\n          \"AUTO_MESSAGES\",\n          \"MULTI_DIALOG\",\n          \"FILE_SHARING\",\n          \"RICH_CONTENT\"\n        ]\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversation By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"});",
											"",
											"postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id,stage,brandId,dialogs.id,dialogs.participants",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Stage",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"stage\": \"CLOSE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - CSATRate",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"rate\": \"4\",\n    \"resolutionConfirmation\": \"true\",\n    \"status\": \"FILLED\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By ConsumerId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let filters = pm.request.url.query.get(\"filters\");",
											"console.log (filters);",
											"// Replace variables if there are present, for example {{account}}",
											"filters = pm.variables.replaceIn(filters);",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    //pm.request.url.query.remove(\"filters\");",
											"    //pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,stage,brandId,dialogs.id,dialogs.participant",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "%7B%22stage%22%3A%22CLOSE%22%7D",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversation Count By ConsumerId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Dialog - Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"dialog_id\", jsonData.id);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id,conversationId,participants",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{DialogEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Dialog - Last One",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id,conversationId,participants",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Last Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{DialogEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Messages",
					"item": [
						{
							"name": "Publish Message - Plain Text",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I need some help today message {{$timestamp}}!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Hosted File",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"HOSTED_FILE\",\n  \"content\": {\n    \"fileType\": \"JPEG\",\n    \"caption\":\"this is the caption\",\n    \"relativePath\": \"/v1/AUTH_async-images/79964415/04dd7685ee1c94d0ca571592ae50cca1bcb87d8dc442299f67893d5ba1ab19d5_uuid_37bc3fe6-4c36-413a-83fa-6b0b6ec02262_01-05-2023_21-52-58-290.JPEG\",\n    \"preview\":\"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCACcAEYDASIAAhEBAxEB/8QAHAAAAQQDAQAAAAAAAAAAAAAAAAIEBQgBAwcG/8QARBAAAQMCAwMIBAoJBQEAAAAAAQIDBAARBRIhBjFBBxMUIjJRYXEIFZGhGCNSVoGUssHR0hYkM1NUYpKi4jRDRGTwsf/EABoBAQACAwEAAAAAAAAAAAAAAAABAgMEBQb/xAAvEQACAgEBBgQDCQAAAAAAAAAAAQIRAwQSEyExUZEFQVJhcXLBFBUiIzOhsdHx/9oADAMBAAIRAxEAPwDg0J5hlaukxkyEkaAqKSKlsNn4Y0InStnm5QaaeQ6rn1pL6lXyLPAZOAG+2tRvTGvVRi9HRzmfNz1xff5X3ab7W4VJMYxDTh8VhcBhTjTqnFvHNmdBAAQdbZRa4trrWTc5PS+xFow5Lw4tQ0pwBIW1HLTyueX8c5muHT3G2lt1Q62lnJlZUmyQDqTmPf4eVTXrqICSIEQagjRem7+bdp7zWDjMUgAQooseCVa+B1pucnpfYWiE5l392r2VtiqRGltrlRg+2k3U0okBQqVRjENIsYMZRHE5/wAaYYnNalc2GmW2su/JcX9ppucnpfYWhUqdFehwmG8LisOMhYdfbUrO/dVwVXJAKRoLCtyp+FGO8hvCfjFOlTa1PklDeWwTa2pvrfx3VHypCX0MpDTLXNthslAsV7+sfHWneK4k3PjRGkRWmCyjKVII6+gF9w7r8d9Nzk9L7C0MpC0OPKW00GkHcgEkD6TRRJdDzxWEpQCBoLcBaim5yel9haO8RfR72tj4LIwwTcAUHlZi4pa8w7O7qeHvNK+D5taQQXNkye/ml3+zVo1JQZAd5wacLVlKWkyFPBzVQsRw/wDaV0vvzV+3Yxbv2Kkv+jLtW68tz1lgaMyirKhTgSPADLurcfRt2rKGB07ACtoFOYqc644AjLbTXWra86j5Qry+3Ozv6TJw1tub0VDEjO+pBUFuMlJC2gQdAsaEncN2tZY+O6qTqUkl8CXijXIrifRt2sNj07Z7Tu5z8tNmvR+2ilS5MNnFNmy+0OulJXcX7urw3V3KVyXQpBxA+s3mzMkOSFBDTYCStJTYC1hlB6p3g3OpJrokNlmOCrMlTywkOOZQCuwsL2qmXxnUJxeOSfX8LMawpvkVMZ9GXatp1C/WWCKym9lLcsf7a3I9HDaoOOBM/Z0kqzFJLireHZ3VbbnUfKFN2k5HlLLqSDf/AN4VE/HtXLg67F5Yo8qKmu+jbtTJShKMR2eTl4tqcBPn1aKtlHabZeW5zxVmvYG1k63sKKmHj2siqtdhHEq4oFxnFE2dKb91tKwqI6UgB9ST3gDX3U1xbFI0Oayw/ikWG4pBWGnikFSQdTc7hTHD9oIEpbCWcfw98rcygIUnr20KR46j6a5SxyatIy8CW6G9/Eq/pH4UpcR1QAD6knvAH4U2RtHgqmkujFoIQeKn0p4gcTpvHtpLm02BthJXjGHgKNgekJsff4Gm6n0YtDpMR0b5Cj5gfhQqI6Soh9QB3Cw091M5u1OBQXQ3LxWIyshJAW4BcKAIIPG4IpJ2swAQ+leuYBj3I5wPJIuAVH3Amp3U+ey+wtD0Q3gf9Ss/QPwpS4jqj1X1J8gD91asIxzC8YLowqfGmFoAr5lYVlve17eRqRqkotOpKhzGyWFhIBVmPeaKc0VBIymw4MpwKlxGH1pBSFONhRAO8a+dN2cIwhhaFs4ZDbUg5klDCRY940309d7ZpNWU5JUmCPdwDA3rc7hMJVlZ9WE6qve579daUcDwQpAOEwSAAADHRpbdw8TT6mHrjDOldG9YwukXy810hGe/dlvep3k+rIdLmbl4VhS3M68OiqVobqZSdwAHuAH0CtTeB4K2uQpOGRbyFhx0FoEKUE5Qbbr5dKc9IZ/fN/1ihEhlbgQh5tSzrlCwT7KbyXUmhcWNDiFRixWWCoBJ5tsJuBuGnmac84O5Xsrzu18pcbBnA2sNLeIbDpd5oNjeTm4aA1zh92E8FLfxJClpTr+sPySDY9bQ6W3/AEViyvKqko37tpfyczWeJQ0s921b7fQ7UhYUbC9FRmzT7knCozzxUVKbFlKSUlY4KIPeNfpoq7VOjowkpxUl5j13tmk0p3tmk1BYwaqXLaA5cUpyjWajh/IKtmaqs+kK5fGE981v7AoaWt5Q+ZHVZ8EgXSkfRUlsI0pGPkqH+yv/AOivI4hyjQocl6M8uIpbTikKIQ7YWJFr5bcBr51N8nG2eF41tQmI1IjJluMOKQylLgUoDKSeskDv41k3OSr2XXwNy0dHx0wThrrWJyWo0d4ZM7iwnXeLX0vpe3hXhZH6JxQ6cQ2tkOJUkNuASEoCkk6JPNpGmvvr0u3GzaNpocSO6hpxtl0uFDiiBfKQDp3E1Ap5N4aAtLMbD2m1nVCmy51b3A17qwyWmf6kJSftVfucjWrUyy/l44tdXf8AaR7nZ1+FJwuM5hbgchc2EtKBJukabzrworXsvhaMFwpmA0oFDWYjKnKBdRVYDuF7UVZtPilR1MW0oR2lTryJB3tmkGlu9s0g0Mhg1Vwt5+Xhhdv+a39gVaM1WiKjPy0Mr4iaj7Aq0Y2c7xGWysfzI4/tVjE9W2+PsIcgtttTH7Z4DayQFnS4bJv4muhejziLz/KvCZV0RTZiSDduIhtXZG5XNpPsrnO0jwh7cbQrMfnVqnPgKuBYFZuNQa6B6OL/AErlZhqDSmwiFIGpBvoO4CvY6jT1ppSUeGz7dDOsi2qst2KzSU0oV4w2jax2j5UUMdo+VFAJd7ZpBpbvbNIoDFVtw1JPK+2r/up+wKskrsnyri2BbPlW1ycYLzITz4cyG+bda1ZMbSu+hoa/BPMsah5STfwK/wC10TPtdjSrb5rx/vNe69HONzXKYwq1v1R4e4U12jhsLxfEHktgrVKdKuubnrnhbSvT8iDCGeUGOpLakEsPDW/yfKvZajUKWjkl6focrFkn9pin1LIppQpIpQrxJ6Q2sdo+VFDHaPlRQCXe2aTWMQeUwy84nUttKWB3kAn7q8vsFtg1tXCkuNOM8/GLaH22iTza1JzFJvU02rRF8aPTqBKVAcRavARdjMTZk88XYJVmzA5l/lrpY3CioJK9zeRvHH50qQnEMN+OdW5Yqc0zKJ+T41O8nnJvi+zW1TOJTZUJ2OhpxBS0tZUSoWGhSBXZ6K3Za/NKDg3wNOOgwxmppcRmKyKd0VpG4aWO0fKit1FANMRZW+w82garaUgeZBH314Hkp2Nm7KObQGW2kCdJQ63lWFXAQRrbdXMp/pOFE15ELZ3nIwWQ2tyTlUpPAkAaX7q0D0nZR3bMN/Wj+WrxySjGUFyf+lHjTkpdCzo3UVWL4T0r5st/Wz+Wj4T0n5stfWz+WqFyztFVlV6TUgAkbPME9wlK/LSPhPSvmy39b/xoCztFVi+E9K+bLf1v/Gj4T0r5st/W/wDGgLO0VXTAvSYiPyHE41gjsRoIuhbDoduq+4gge3wooCuEaU01hz8dyLncWSQ4NN4Fr6cLXFu83rdBlBuK20qXIZyKKrJYChcneDfwFRNFEqHHzJN9MaU8t6RNfU4oi56Nv4d/dWgMRcv7d/Nlv+w0v3b/AH0zp0jGHm0JQI8IhIsCqMgk+ZtQG4RoFtZcjf8Aw/D+qkmPC1tJkHXT4jhbz76R67f/AIaB9VR+Fa38RcloDa2YqADe7TKUH2gUA46NBIJ6W+D3dHv99NpTTaHbRluON2HWUjKb8dK00UBnKruPsorFFAf/2Q==\"\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Plain Text to New Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I need some help today message {{$timestamp}}!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Rich Content",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"RICH_CONTENT\",\n  \"content\": {\n     \"structuredContent\": {\n        \"type\": \"vertical\",\n        \"elements\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"product name (Title)\",\n            \"tooltip\": \"text tooltip\"\n          }\n        ]\n      },\n      \"alt\": \"alt text to go with message.\",\n      \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Acknowledgement",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"CHAT_STATE\",\n  \"content\": {\n      \"chatState\" : \"COMPOSING\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Chat State",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {",
											"    pm.response.to.have.status(204);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"CHAT_STATE\",\n  \"content\": {\n    \"chatState\": \"COMPOSING\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"//let filters = pm.request.url.query.get(\"filters\");",
											"",
											"// Replace variables if there are present, for example {{account}}",
											"//filters = pm.variables.replaceIn(filters);",
											"////if(filters) {",
											"   // let encodedFilters = encodeURIComponent(filters);",
											"//    pm.request.url.query.remove(\"filters\");",
											"//    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"//}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "5",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,content.text,originator.role,createdTs",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Message Count",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									],
									"query": [
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Unread Messages Count",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{consumer_id}}/unread-messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{consumer_id}}",
										"unread-messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages From New Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,dialogId,sequence,content.text",
											"disabled": true
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Subscriptions",
					"item": [
						{
							"name": "Create Subscription for Conversation updates (ExConvSubscription)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "User-ID",
										"value": "{{consumer_id}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"ExConvSubscription\",\n  \"filters\": {\n    \"consumerId\": \"{{consumer_id}}\",\n    \"brandId\": \"{{account}}\",\n    \"conversationStages\": [\n      \"OPEN\", \"CLOSE\"\n    ],\n    \"conversationStates\": [\n      \"OPEN\", \"CLOSE\"\n    ],\n    \"dialogTypes\": [\n        \"MAIN\",\n        \"POST_SURVEY\"\n    ]\n  },\n  \"notifications\": {\n        \"mode\": \"WEBHOOK\",\n        \"webhookEndpointId\": \"{{webhook_endpoint_id}}\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/subscriptions",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Subscription for Messages (MSSubscription)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "Request-ID",
										"value": "{{$timestamp}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"MsSubscription\",\n  \"filters\" : {\n    \"dialogId\": \"{{conv_id}}\",\n    \"fromSeq\": 0\n  },\n  \"notifications\": {\n        \"mode\": \"WEBHOOK\",\n        \"webhookEndpointId\": \"{{webhook_endpoint_id}}\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/subscriptions",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Single Subscription By Id",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id,type,brandId",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Subscription (Unsubscribe)",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{SubscriptionEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "File Upload/Download",
					"item": [
						{
							"name": "Generate File Upload Path",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"relativePath\", JSON.parse(responseBody).relativePath);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{consumer_id}}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n   \"fileSize\":5020,\n   \"fileType\":\"MP3\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://localhost:8181/v1/brands/le87601888/file-upload-path",
									"protocol": "http",
									"host": [
										"localhost"
									],
									"port": "8181",
									"path": [
										"v1",
										"brands",
										"le87601888",
										"file-upload-path"
									]
								}
							},
							"response": []
						},
						{
							"name": "Generate File Download Path",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{ConsumerJWT}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{consumer_id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"relativePath\": \"{{relativePath}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/brands/{{account}}/file-download-path",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"brands",
										"{{account}}",
										"file-download-path"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Agent",
			"item": [
				{
					"name": "Auth",
					"item": [
						{
							"name": "Acquire Agent Bearer Token from IDP",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"agent_bearer_token\", pm.response.json().bearer);",
											"postman.setEnvironmentVariable(\"agent_id\", pm.variables.replaceIn(\"{{account}}\") + \".\" + pm.response.json().config.userId);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\"username\": \"{{agent_username}}\", \"password\": \"{{agent_password}}\"}"
								},
								"url": {
									"raw": "https://{{agentVepDomain}}/api/account/{{account}}/login?v=1.3",
									"protocol": "https",
									"host": [
										"{{agentVepDomain}}"
									],
									"path": [
										"api",
										"account",
										"{{account}}",
										"login"
									],
									"query": [
										{
											"key": "v",
											"value": "1.3"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Acquire Agent Bearer Token from IDP LPA",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"agent_bearer_token\", pm.response.json().bearer);",
											"postman.setEnvironmentVariable(\"agent_id\", pm.variables.replaceIn(\"{{account}}\") + \".\" + pm.response.json().config.userId);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\"username\": \"agent_00006@liveperson.com\", \"password\": \"{{agent_password}}\"}"
								},
								"url": {
									"raw": "https://{{agentVepDomain}}/api/account/{{account}}/login?v=1.3",
									"protocol": "https",
									"host": [
										"{{agentVepDomain}}"
									],
									"path": [
										"api",
										"account",
										"{{account}}",
										"login"
									],
									"query": [
										{
											"key": "v",
											"value": "1.3"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "User Profiles",
					"item": [
						{
							"name": "Get Consumer By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept-encoding": true,
									"connection": true,
									"user-agent": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account-id}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Agent By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"AgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/agents/{{agent_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"agents",
										"{{agent_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Conversations",
					"item": [
						{
							"name": "Get Conversation By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"});",
											"",
											"postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{agent_bearer_token}}",
										"type": "text"
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By ConsumerId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,stage,dialogs,context",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversation Count By ConsumerId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By Agent",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/agents/{{agent_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"agents",
										"{{agent_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										},
										{
											"key": "sortOrder",
											"value": "ASC",
											"description": "ASC | DESC (default)",
											"disabled": true
										},
										{
											"key": "sortBy",
											"value": "lastUpdatedTs",
											"description": "createdTs (default) | lastUpdatedTs",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,stage,dialogs,context",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversation Count By Agent",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/agents/{{agent_id}}/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"agents",
										"{{agent_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By BrandId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										},
										{
											"key": "sortOrder",
											"value": "ASC",
											"description": "ASC | DESC (default)",
											"disabled": true
										},
										{
											"key": "sortBy",
											"value": "lastUpdatedTs",
											"description": "createdTs (default) | lastUpdatedTs",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id,stage,dialogs,context",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversation Count By BrandId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations"
									],
									"query": [
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Participant to Dialog - as ASSIGNED_AGENT",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"AgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{agent_id}}\",\n    \"role\": \"ASSIGNED_AGENT\",\n    \"state\": \"ACTIVE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Participant to Dialog - as READER",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"AgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{agent_id}}\",\n    \"role\": \"READER\",\n    \"state\": \"ACTIVE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Participants by Dialog Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "3",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "id",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Participant Count by DialogId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants"
									],
									"query": [
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Consumer In Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{consumer_id}}"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "3",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Agent In Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"AgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{agent_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{agent_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Dialog - Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"dialog_id\", jsonData.id);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}"
									],
									"query": [
										{
											"key": "fields",
											"value": "id",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Note",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"note\": \"Just some test note by agent 567.\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Stage",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"stage\": \"CLOSE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - TTR",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"type\": \"CUSTOM\",\n    \"value\": 100\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Skill Update",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n   \"skillId\":\"4456638310\" \n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - RollOver",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"conversationHandlerDetails\": {\n        \"accountId\":\"le87601888\",\n        \"skillId\":\"4456638310\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Add Meta",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n   \"metadata\": {\n        \"appInstallId\": \"81283dd0-791f-4ec1-9bd6-522a758b6f19\"\n   }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"DialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{DialogEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Participant from Dialog - TakeOver",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"AgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{AgentEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"role\": \"ASSIGNED_AGENT\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{agent_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{agent_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Agent Participant from Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"AgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {},
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{AgentEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"role\": \"ASSIGNED_AGENT\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{agent_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{agent_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Manager Participant from Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"AgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {},
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{AgentEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"role\": \"ASSIGNED_AGENT\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{manager_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{manager_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Remove Participant from Dialog",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{AgentEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{agent_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{agent_id}}"
									],
									"query": [
										{
											"key": "transferToSkillId",
											"value": "{{transferToSkillId}}",
											"disabled": true
										},
										{
											"key": "transferToAgentId",
											"value": "{{transferToAgentId}}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Remove Agent - Transfer to another Agent",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{AgentEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{agent_id}}?transferToAgentId={{transferToAgentId}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{agent_id}}"
									],
									"query": [
										{
											"key": "transferToSkillId",
											"value": "{{transferToSkillId}}",
											"disabled": true
										},
										{
											"key": "transferToAgentId",
											"value": "{{transferToAgentId}}"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"private_dialog_id\", jsonData.id);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"PrivateDialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "\n{\n    \"conversationId\": \"{{conv_id}}\",\n    \"participants\": [\n        {\n        \"id\": \"le84625337.4108439810\",\n        \"role\": \"ASSIGNED_AGENT\",\n        \"state\": \"ACTIVE\"\n        }\n    ],\n    \"dialogType\": \"AGENTS\",\n    \"channelType\": \"MESSAGING\",\n    \"state\": \"OPEN\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Participant to Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"PrivateAgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{PrivateDialogEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{agent_id}}\",\n    \"role\": \"ASSIGNED_AGENT\",\n    \"state\": \"ACTIVE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}/participants",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}",
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"PrivateDialogEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{PrivateDialogEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Messages",
					"item": [
						{
							"name": "Publish Message - Plain Text",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"{{account}}\",\t\"userId\":\"{{agent_id}}\"}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I'm agent {{$timestamp}}...!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\",\n  \"originator\": {\n        \"role\": \"CONSUMER\",\n        \"id\": \"2494c17a-1bb4-40d6-ad44-9eee96fa5945\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Rich Content",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"RICH_CONTENT\",\n  \"content\": {\n     \"structuredContent\": {\n        \"type\": \"vertical\",\n        \"elements\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"product name (Title)\",\n            \"tooltip\": \"text tooltip\"\n          }\n        ]\n      },\n      \"alt\": \"alt text to go with message.\",\n      \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Acknowledgement",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"{{account}}\",\t\"userId\":\"{{agent_id}}\"}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"ACKNOWLEDGEMENT\",\n  \"content\": {\n    \"sequenceList\": [0],\n    \"status\":\"READ\"\n  },\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Chat State",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 204\", function () {",
											"    pm.response.to.have.status(204);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"CHAT_STATE\",\n  \"content\": {\n    \"chatState\": \"COMPOSING\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Private Message - Plain Text",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I need some help today message {{$timestamp}}!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"AGENTS_AND_MANAGERS\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages?limit=5",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5"
										},
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}\"",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "sequence,content.text",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Message Count",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									],
									"query": [
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Unread Messages Count",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "HEAD",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{consumer_id}}/unread-messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{consumer_id}}",
										"unread-messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages from Private Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}\"",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Subscriptions",
					"item": [
						{
							"name": "Create Subscription for Conversation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"ExConvSubscription\",\n  \"filters\": {\n    \"brandId\": \"{{account}}\",\n    \"agentIds\": [\"{{agent_id}}\"],\n    \"conversationStages\": [\n      \"OPEN\", \"CLOSE\"\n    ]\n  },\n  \"notifications\": {\n        \"mode\": \"WEBHOOK\",\n        \"webhookEndpointId\": \"{{webhook_endpoint_id}}\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Subscription for Messages",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"MsSubscription\",\n  \"filters\" : {\n    \"dialogId\": \"{{conv_id}}\",\n    \"fromSeq\": 0\n  },\n  \"notifications\": {\n        \"mode\": \"WEBHOOK\",\n        \"webhookEndpointId\": \"{{webhook_endpoint_id}}\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Single Subscription By Id",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update Subscription - Extend Expiration",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{SubscriptionEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"expirationTs\" : \"2023-05-05T19:17:49.601+00:00\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Subscription (Unsubscribe)",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{SubscriptionEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Manager",
			"item": [
				{
					"name": "Auth",
					"item": [
						{
							"name": "Acquire Agent Bearer Token from IDP",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"postman.setEnvironmentVariable(\"manager_bearer_token\", pm.response.json().bearer);",
											"postman.setEnvironmentVariable(\"manager_id\", pm.variables.replaceIn(\"{{account}}\") + \".\" + pm.response.json().config.userId);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\"username\": \"{{manager_username}}\", \"password\": \"{{manager_password}}\"}"
								},
								"url": {
									"raw": "https://{{agentVepDomain}}/api/account/{{account}}/login?v=1.3",
									"protocol": "https",
									"host": [
										"{{agentVepDomain}}"
									],
									"path": [
										"api",
										"account",
										"{{account}}",
										"login"
									],
									"query": [
										{
											"key": "v",
											"value": "1.3"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "User Profiles",
					"item": [
						{
							"name": "Get Consumer By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/consumers/{{consumer_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Agent By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/agents/{{manager_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"agents",
										"{{manager_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Conversations",
					"item": [
						{
							"name": "Get Conversation By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"});",
											"",
											"postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By BrandId Copy",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										},
										{
											"key": "sortOrder",
											"value": "ASC",
											"description": "ASC | DESC (default)",
											"disabled": true
										},
										{
											"key": "sortBy",
											"value": "lastUpdatedTs",
											"description": "createdTs (default) | lastUpdatedTs",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Note",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"note\": \"Just some test note by agent.\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - RollOver",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"conversationHandlerDetails\": {\n        \"accountId\":\"le87601888\",\n        \"skillId\":\"4456638310\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Skill Update",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"conversationHandlerDetails\": {\n        \"accountId\":\"le87601888\",\n        \"skillId\":\"4456638310\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By ConsumerId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Participant to Dialog",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{manager_id}}\",\n    \"role\": \"MANAGER\",\n    \"state\": \"ACTIVE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Participant by Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{manager_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{manager_id}}"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "3",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Update Participant in Dialog - Take Over",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"role\": \"ASSIGNED_AGENT\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{agent_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{agent_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Participant by Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"postman.setEnvironmentVariable(\"participantEtag\", pm.response.headers.get(\"ETag\"));"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{manager_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{manager_id}}"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "3",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Dialog - Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"dialog_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Add Meta",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n   \"metadata\": {\n        \"appInstallId\": \"81283dd0-791f-4ec1-9bd6-522a758b6f19\"\n   }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Remove Participant from Dialog",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{manager_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{manager_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"private_dialog_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "\n{\n    \"conversationId\": \"{{conv_id}}\",\n    \"participants\": [\n        {\n        \"id\": \"{{manager_id}}\",\n        \"role\": \"MANAGER\",\n        \"state\": \"ACTIVE\"\n        }\n    ],\n    \"dialogType\": \"AGENTS\",\n    \"channelType\": \"MESSAGING\",\n    \"state\": \"OPEN\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Participant to Private Dialog",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{agent_id}}\",\n    \"role\": \"ASSIGNED_AGENT\",\n    \"state\": \"ACTIVE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}/participants",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}",
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Add Participant (TO REMOVE)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"type\": \"ADD\",\n    \"id\": \"{{agent_id}}\",\n    \"role\": \"AGENT\",\n    \"dialogId\": \"{{dialog_id}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Close Conv",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"stage\": \"CLOSE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Messages",
					"item": [
						{
							"name": "Publish Message - Plain Text",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"{{account}}\",\t\"userId\":\"{{agent_id}}\"}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I'm agent {{$timestamp}}...!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Rich Content",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"RICH_CONTENT\",\n  \"content\": {\n     \"structuredContent\": {\n        \"type\": \"vertical\",\n        \"elements\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"product name (Title)\",\n            \"tooltip\": \"text tooltip\"\n          }\n        ]\n      },\n      \"alt\": \"alt text to go with message.\",\n      \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Private Message - Plain Text",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I need some help today message {{$timestamp}}!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"AGENTS_AND_MANAGERS\"\n}"
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}\"",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages from Private Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}\"",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Subscriptions",
					"item": [
						{
							"name": "Create Subscription for Conversation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"ExConvSubscription\",\n  \"filters\": {\n    \"consumerId\": \"{{consumer_id}}\",\n    \"brandId\": \"{{account}}\",\n    \"agentIds\": [\"{{agent_id}}\"],\n    \"conversationStages\": [\n      \"OPEN\", \"CLOSE\"\n    ]\n  }\n}"
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/subscriptions",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Subscription for Messages",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"MsSubscription\",\n  \"filters\" : {\n    \"dialogId\": \"{{conv_id}}\",\n    \"fromSeq\": 0\n  }\n}"
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/subscriptions",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Single Subscription By Id",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/subscriptions/{{sub_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Subscription Copy",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{SubscriptionEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/subscriptions/{{sub_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "Agent Server",
			"item": [
				{
					"name": "Auth",
					"item": []
				},
				{
					"name": "User Profiles",
					"item": [
						{
							"name": "Get Consumer By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"ConsumerEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/consumers/{{consumer_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"consumers",
										"{{consumer_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Agent By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/agents/{{manager_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"agents",
										"{{manager_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Conversations",
					"item": [
						{
							"name": "Get Conversation By Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"});",
											"",
											"postman.setEnvironmentVariable(\"ConversationEtag\", pm.response.headers.get(\"ETag\"));",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "{{AppJWT}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "X-LP-ON-BEHALF",
										"value": "{{ConsumerJWS}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By BrandId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										},
										{
											"key": "sortOrder",
											"value": "ASC",
											"description": "ASC | DESC (default)",
											"disabled": true
										},
										{
											"key": "sortBy",
											"value": "lastUpdatedTs",
											"description": "createdTs (default) | lastUpdatedTs",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Note",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"note\": \"Note added after conversation close.\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - RollOver",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"conversationRollOverHandler\": {\n        \"accountId\":\"le87601888\",\n        \"skillId\":\"4456638310\"\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Skill Update",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"skillId\":\"4119949110\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Conversations By ConsumerId",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/consumers/{{consumer_id}}/conversations",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"consumers",
										"{{consumer_id}}",
										"conversations"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "12",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"stage\":\"OPEN\"}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Participant to Dialog",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{agent_id}}\",\n    \"role\": \"ASSIGNED_AGENT\",\n    \"state\": \"ACTIVE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Participants by Dialog Id",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "3",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Dialog - Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"dialog_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Add Meta",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n   \"metadata\": {\n        \"appInstallId\": \"81283dd0-791f-4ec1-9bd6-522a758b6f19\"\n   }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Main Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Participant from Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"AgentEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {},
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{AgentEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"role\": \"ASSIGNED_AGENT\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{agent_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{agent_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Remove Participant from Dialog",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/participants/{{manager_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"participants",
										"{{manager_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"private_dialog_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "\n{\n    \"participants\": [\n        {\n        \"id\": \"{{manager_id}}\",\n        \"role\": \"MANAGER\",\n        \"state\": \"ACTIVE\"\n        }\n    ],\n    \"dialogType\": \"AGENTS\",\n    \"channelType\": \"MESSAGING\",\n    \"state\": \"OPEN\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs"
									]
								}
							},
							"response": []
						},
						{
							"name": "Add Participant to Private Dialog",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"id\": \"{{agent_id}}\",\n    \"role\": \"ASSIGNED_AGENT\",\n    \"state\": \"ACTIVE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}/participants",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}",
										"participants"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Close Private Dialog",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"state\": \"CLOSE\",\n    \"closeReason\": \"Ignored\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Dialog By Id - Add Participant (TO REMOVE)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"type\": \"ADD\",\n    \"id\": \"{{agent_id}}\",\n    \"role\": \"AGENT\",\n    \"dialogId\": \"{{dialog_id}}\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Patch Conversation By Id - Close Conv",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{ConversationEtag}}",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"le66223394\",\t\"userId\":\"9000000007\"}",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"stage\": \"CLOSE\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Messages",
					"item": [
						{
							"name": "Publish Message - Plain Text",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "AuthorizationInfo",
										"value": "{\"accountId\":\"{{account}}\",\t\"userId\":\"{{agent_id}}\"}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I'm agent {{$timestamp}}...!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\",\n  \"originator\": {\n      \"id\": \"le84625337.4120323110\",\n      \"role\": \"ASSIGNED_AGENT\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Message - Rich Content",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"RICH_CONTENT\",\n  \"content\": {\n     \"structuredContent\": {\n        \"type\": \"vertical\",\n        \"elements\": [\n          {\n            \"type\": \"text\",\n            \"text\": \"product name (Title)\",\n            \"tooltip\": \"text tooltip\"\n          }\n        ]\n      },\n      \"alt\": \"alt text to go with message.\",\n      \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"ALL\"\n}"
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{dialog_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{dialog_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Publish Private Message - Plain Text",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"PLAIN_TEXT\",\n  \"content\": {\n    \"text\": \"Hi, I need some help today message {{$timestamp}}!\",\n    \"alt\":\"this is the alt text\",\n    \"quickReplies\": {\n        \"type\": \"quickReplies\",\n        \"itemsPerRow\": 3,\n        \"replies\": [\n          {\n            \"type\": \"button\",\n            \"title\": \"Find similar\",\n            \"tooltip\": \"store is the thing\",\n            \"click\": {\n              \"metadata\": [\n                {\n                  \"type\": \"ExternalId\",\n                  \"id\": \"MY_CARD_ID.FIND_SIMILAR_ACTION_ID\"\n                }\n              ],\n              \"actions\": [\n                {\n                  \"type\": \"link\",\n                  \"name\": \"Buy\",\n                  \"uri\": \"http://www.google.com\"\n                }\n              ]\n            }\n          },\n          {\n            \"type\": \"button\",\n            \"tooltip\": \"button tooltip\",\n            \"title\": \"Publish text\",\n            \"click\": {\n              \"actions\": [\n                {\n                  \"type\": \"publishText\",\n                  \"text\": \"my text\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n  },\n  \"metadata\": [\n      {\n        \"type\": \"ActionReason\",\n        \"reason\": \"some reason\",\n        \"reasonId\": \"some reason Id\"\n      }\n  ],\n  \"messageAudience\": \"AGENTS_AND_MANAGERS\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/conversations/{{conv_id}}/dialogs/{{conv_id}}/messages?fields=sequence,content.text,type,originator",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{conv_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}\"",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										},
										{
											"key": "fields",
											"value": "sequence,content.text,type,originator"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Query Messages from Private Dialog",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"let queryParams = pm.request.url.query;",
											"",
											"let filtersParam = queryParams.find(p => !p.disabled && p.key === 'filters');",
											"",
											"let filters;",
											"if(filtersParam && filtersParam.value) {",
											"    // Replace variables if there are present, for example {{account}}",
											"    filters = pm.variables.replaceIn(filtersParam.value);",
											"}",
											"",
											"if(filters) {",
											"    let encodedFilters = encodeURIComponent(filters);",
											"    pm.request.url.query.remove(\"filters\");",
											"    pm.request.url.query.upsert(`filters=${encodedFilters}`);",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disableBodyPruning": true,
								"disabledSystemHeaders": {
									"accept": true,
									"accept-encoding": true,
									"connection": true,
									"content-type": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "http://{{umsDomain}}/v1/conversations/{{conv_id}}/dialogs/{{private_dialog_id}}/messages",
									"protocol": "http",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"v1",
										"conversations",
										"{{conv_id}}",
										"dialogs",
										"{{private_dialog_id}}",
										"messages"
									],
									"query": [
										{
											"key": "offset",
											"value": "0",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "5",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{\"originatorIds\":[\"{{consumer_id}}\"],\"originatorRoles\":[\"CONSUMER\"],\"messageAudiences\":[\"ALL\"]}\"",
											"disabled": true
										},
										{
											"key": "filters",
											"value": "{}",
											"disabled": true
										},
										{
											"key": "olderThanSequence",
											"value": "10",
											"disabled": true
										},
										{
											"key": "newerThanSequence",
											"value": "0",
											"disabled": true
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Subscriptions",
					"item": [
						{
							"name": "Create ExConvSubscription - All Open Conversations of Brand",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text",
										"disabled": true
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"ExConvSubscription\",\n  \"filters\": {\n    \"brandId\": \"{{account}}\",\n    \"conversationStages\": [\n      \"OPEN\"\n    ]\n  },\n  \"notifications\": {\n        \"mode\": \"WEBHOOK\",\n        \"webhookEndpointId\": \"{{webhook_endpoint_id}}\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create MSSubscription",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"SubscriptionEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"sub_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"MsSubscription\",\n  \"filters\" : {\n    \"dialogId\": \"{{conv_id}}\",\n    \"fromSeq\": 0\n  },\n  \"notifications\": {\n        \"mode\": \"WEBHOOK\",\n        \"webhookEndpointId\": \"{{webhook_endpoint_id}}\"\n  }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Single Subscription By Id",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update Subscription - Extend Expiration",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{SubscriptionEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"expirationTs\" : \"2023-05-05T19:17:49.601+00:00\"\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Subscription (Unsubscribe)",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{manager_bearer_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"name": "Content-Type",
										"value": "application/json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{SubscriptionEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/subscriptions/{{sub_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"subscriptions",
										"{{sub_id}}"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Webhooks",
					"item": [
						{
							"name": "Create Webhook Endpoint",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"WebhookEndpointEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"webhook_endpoint_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"New test Webhook Endpoint for {{account}}\",\n    \"uri\": \"https://typedwebhook.tools/webhook/57e78baa-c6ee-4256-9cc9-9e913d591c8e\",\n    \"method\": \"POST\",\n    \"security\": {\n        \"credentials\": {\n            \"id\": \"{{webhook_credential_id}}\"\n        }\n    },\n    \"headers\": {\"test-header\":\"test_header_value\"},\n    \"resilience\":{\n      \"retries\" : {\n          \"attempts\": 1,\n          \"retryOnReadTimeout\": false\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-endpoints",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-endpoints"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Webhook Endpoint LP-INTERNAL",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"WebhookEndpointEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"webhook_endpoint_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "LP-INTERNAL",
										"type": "text"
									},
									{
										"key": "User-ID",
										"value": "{{agent_id}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"New GLOBAL Webhook Endpoint in Alpha\",\n    \"uri\": \"https://webhook.site/9db4f73e-720c-4aa9-862d-a53f403fe963\",\n    \"method\": \"POST\",\n    \"security\": {\n        \"credentials\": {\n            \"id\": \"{{webhook_credential_id}}\"\n        }\n    },\n    \"headers\": {\"test-header\":\"test_header_value\"},\n    \"resilience\":{\n      \"retries\" : {\n          \"attempts\": 1,\n          \"retryOnReadTimeout\": false\n      }\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-endpoints",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-endpoints"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Webhook Credentials",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"WebhookCredentialEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"webhook_credential_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"scheme\": \"LP_SIGNATURE\",\n    \"settings\": {\n        \"algorithm\": \"HMAC-SHA256\"\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-credentials",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-credentials"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Webhook Credentials LP-INTERNAL",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 201\", function () {",
											"    pm.response.to.have.status(201);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"WebhookCredentialEtag\", pm.response.headers.get(\"ETag\"));",
											"});",
											"",
											"const jsonData = pm.response.json();",
											"pm.test(\"id field in Response Body is present\", function () {",
											"    pm.expect(jsonData.id).to.not.be.empty;",
											"    postman.setEnvironmentVariable(\"webhook_credential_id\", jsonData.id);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Brand-ID",
										"value": "LP-INTERNAL",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"scheme\": \"LP_SIGNATURE\",\n    \"settings\": {\n        \"algorithm\": \"HMAC-SHA256\"\n    }\n}"
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-credentials",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-credentials"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Single Webhook Endpoint By Id",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"WebhookEndpointEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept-encoding": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-endpoints/{{webhook_endpoint_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-endpoints",
										"{{webhook_endpoint_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Webhook Endpoint",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{WebhookEndpointEtag}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-endpoints/{{webhook_endpoint_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-endpoints",
										"{{webhook_endpoint_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Update Webhook Endpoint",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"WebhookEndpointEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept-encoding": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{WebhookEndpointEtag}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Edited Webhook Endpoint name with header change\",\n    \"headers\": {\n        \"test-header-2\": \"test_header_value_2\"\n    },\n    \"resilience\": {\n        \"retries\": {\n            \"attempts\": 2,\n            \"retryOnReadTimeout\": true\n        }\n    }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-endpoints/{{webhook_endpoint_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-endpoints",
										"{{webhook_endpoint_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Single Webhook Credential By Id",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"ETag Response Header is present\", function () {",
											"    pm.response.to.have.header(\"ETag\");",
											"    postman.setEnvironmentVariable(\"WebhookCredentialEtag\", pm.response.headers.get(\"ETag\"));",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept-encoding": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-credentials/{{webhook_credential_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-credentials",
										"{{webhook_credential_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Webhook Credential",
							"protocolProfileBehavior": {
								"disabledSystemHeaders": {
									"accept-encoding": true
								}
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "{{WebhookCredentialEtag}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-credentials/{{webhook_credential_id}}",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-credentials",
										"{{webhook_credential_id}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Webhook Endpoints For Brand",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{agent_server_jwt}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Brand-ID",
										"value": "{{account}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://{{umsDomain}}/messaging/v1/webhook-endpoints?includeInternal=true",
									"protocol": "https",
									"host": [
										"{{umsDomain}}"
									],
									"path": [
										"messaging",
										"v1",
										"webhook-endpoints"
									],
									"query": [
										{
											"key": "includeInternal",
											"value": "true"
										}
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	]
}